# ~/.config/bash/.bashenv
# Purpose: Set environment variables and paths for all shell types (login, non-login, interactive, non-interactive)
# This file is always sourced first, like zsh's .zshenv

# For compatibility with termux
export USERNAME=sametaor

# Bash config root
export BASH_CONFIG_DIR="${HOME}/.config/bash"

# General environment vars
export EDITOR=nvim
export VISUAL="$EDITOR"
export PAGER=less
export LESS="-RFiX"
export LANG=en_US.UTF-8

# PATH setup (no typeset -U in bash, so be careful with duplicates)
PATH="$HOME/.local/bin:/usr/local/bin:$PATH"
export PATH

# History config
export HISTFILE="${HOME}/.config/bash/.bash_history"
export HISTSIZE=50000
export HISTFILESIZE=50000
export HISTCONTROL=ignoreboth:erasedups
export HISTTIMEFORMAT='[%F %T] '

# GPG for tty support
export GPG_TTY=$(tty)

# Fzf default formatting options (compatible with bash)
export FZF_DEFAULT_OPTS='--color=fg:#c8d3f5,fg+:#c8d3f5,bg:#222436,bg+:#2a2e54 --color=hl:#82aaff,hl+:#86e1fc,info:#c3e88d,marker:#ffc777 --color=prompt:#ff757f,spinner:#c099ff,pointer:#c099ff,header:#828bb8 --color=border:#6c75ba,label:#9da8ee,query:#c8d3f5 --border="rounded" --border-label="FZF" --border-label-pos="0" --preview-window="border-double" --padding="1" --margin="1" --prompt=">_ " --marker=">>" --pointer="=>" --separator="â”€" --scrollbar="|" --layout="reverse" --info="right" --tmux left,80% --height=80%'

# Pyenv variables
export PYENV_ROOT="$HOME/.pyenv"
if [[ -d "$PYENV_ROOT/bin" ]]; then
        export PATH="$PYENV_ROOT/bin:$PATH"
fi

# DBUS and XDG vars
export XDG_RUNTIME_DIR="/run/user/$UID"
export DBUS_SESSION_BUS_ADDRESS="unix:path=${XDG_RUNTIME_DIR}/bus"

# Pnpm home
export PNPM_HOME="$HOME/.local/share/pnpm"
case ":$PATH:" in
    *":$PNPM_HOME:"*) ;;
    *) export PATH="$PNPM_HOME:$PATH" ;;
esac

# Pipx local binary path
export PATH="$PATH:$HOME/.local/bin"

# Cargo / Rust bin path
export PATH="$PATH:$HOME/.cargo/bin"

# Nix package manager profile loader
if [[ -e "$HOME/.nix-profile/etc/profile.d/nix.sh" ]]; then
        . "$HOME/.nix-profile/etc/profile.d/nix.sh"
fi

# Source fzf if the bash version exists
[ -f ~/.fzf.bash ] && source ~/.fzf.bash

# Perl5 Env vars
export PATH="/home/sametaor/perl5/bin${PATH:+:${PATH}}"
export PERL5LIB="/home/sametaor/perl5/lib/perl5${PERL5LIB:+:${PERL5LIB}}"
export PERL_LOCAL_LIB_ROOT="/home/sametaor/perl5${PERL_LOCAL_LIB_ROOT:+:${PERL_LOCAL_LIB_ROOT}}"
export PERL_MB_OPT="--install_base \"/home/sametaor/perl5\""
export PERL_MM_OPT="INSTALL_BASE=/home/sametaor/perl5"